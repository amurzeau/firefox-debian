From: Mike Hommey <mh@glandium.org>
Date: Mon, 3 Sep 2018 07:37:40 +0900
Subject: Use remoting name for call to gdk_set_program_class

Closes: #907574
---
 widget/gtk/nsAppShell.cpp | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

diff --git a/widget/gtk/nsAppShell.cpp b/widget/gtk/nsAppShell.cpp
index c81dac529b40..1d348c0bca05 100644
--- a/widget/gtk/nsAppShell.cpp
+++ b/widget/gtk/nsAppShell.cpp
@@ -23,6 +23,7 @@
 #include "WakeLockListener.h"
 #endif
 #include "gfxPlatform.h"
+#include "nsAppRunner.h"
 #include "ScreenHelperGTK.h"
 #include "HeadlessScreenHelper.h"
 #include "mozilla/widget/ScreenManager.h"
@@ -182,11 +183,7 @@ nsAppShell::Init()
         // option when program uses gdk_set_program_class().
         //
         // See https://bugzilla.gnome.org/show_bug.cgi?id=747634
-        nsAutoString brandName;
-        mozilla::widget::WidgetUtils::GetBrandShortName(brandName);
-        if (!brandName.IsEmpty()) {
-            gdk_set_program_class(NS_ConvertUTF16toUTF8(brandName).get());
-        }
+        gdk_set_program_class(gAppData->remotingName);
     }
 
 #ifdef MOZ_WIDGET_GTK
